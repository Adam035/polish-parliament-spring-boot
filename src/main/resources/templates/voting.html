<!DOCTYPE HTML>
<html lang="pl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${voting.title}"></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/voting.css">
    <link rel="stylesheet" href="/css/horizontal_list.css">
</head>

<body>
<nav th:insert="fragments/nav :: nav"></nav>

<div class="voting-container">
    <h4 th:text="${voting.title}"></h4>
    <h5 th:if="${!voting.title.equals(voting.topic)}" th:text="${voting.topic}"></h5>
    <h6 th:if="${voting.kind} == 'ON_LIST'">Opcje głosowania:</h6>
    <div class="option-container">
        <p id="option" th:each="votingOption, i : ${voting.votingOptions}">
            <span th:text="${votingOption.option}"></span>
            <span th:if="${!i.last}">,</span>
        </p>
    </div>
    <div class="votes-container">
        <div th:if="${voting.kind} == 'ON_LIST'" th:each="votingOption : ${voting.votingOptions}">
            <h5 class="option" th:text="${votingOption.option} + ': ' + ${votingOption.votes}"></h5>
            <ul>
                <li th:each="vote : ${voting.votes}" th:if="${vote.listVotes[votingOption.optionIndex]} == 'YES'">
                    <a th:href="@{'http://localhost:8080/politicians/' + ${vote.MP}}">
                        <div class="politician">
                            <span th:text="${vote.firstName} + ' ' + ${vote.lastName}"></span>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
        <div th:if="${voting.kind} != 'ON_LIST'">
            <h5 class="option" th:text="'Za: ' + ${voting.yes}"></h5>
            <ul>
                <li th:each="vote : ${voting.votes}" th:if="${vote.vote} == 'YES'">
                    <a th:href="@{'http://localhost:8080/politicians/' + ${vote.MP}}">
                        <div class="politician">
                            <span th:text="${vote.firstName} + ' ' + ${vote.lastName}"></span>
                        </div>
                    </a>
                </li>
            </ul>
            <h5 class="option" th:text="'Przeciw: ' + ${voting.no}"></h5>
            <ul>
                <li th:each="vote : ${voting.votes}" th:if="${vote.vote} == 'NO'">
                    <a th:href="@{'http://localhost:8080/politicians/' + ${vote.MP}}">
                        <div class="politician">
                            <span th:text="${vote.firstName} + ' ' + ${vote.lastName}"></span>
                        </div>
                    </a>
                </li>
            </ul>
            <h5 class="option" th:text="'Wstrzymało się: ' + ${voting.abstain}"></h5>
            <ul>
                <li th:each="vote : ${voting.votes}" th:if="${vote.vote} == 'ABSTAIN'">
                    <a th:href="@{'http://localhost:8080/politicians/' + ${vote.MP}}">
                        <div class="politician">
                            <span th:text="${vote.firstName} + ' ' + ${vote.lastName}"></span>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
        <div>
            <h5 class="option">Nieobecni</h5>
            <ul>
                <li th:each="vote : ${voting.votes}" th:if="${vote.vote} == 'ABSENT'">
                    <a th:href="@{'http://localhost:8080/politicians/' + ${vote.MP}}">
                        <div class="politician">
                            <span th:text="${vote.firstName} + ' ' + ${vote.lastName}"></span>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

</body>
</html>